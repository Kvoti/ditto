{"version":3,"sources":["ditto/static/chat/js/chat2.jsx"],"names":[],"mappings":"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","file":"ditto/static/chat/js/chat2.jsx","sourcesContent":["import React from 'react';\n// TODO prob only load components we need?\nimport * as Bootstrap from \"vendor/react-bootstrap/index\";  // TODO shouldn't this work without /index\nimport * as Chat from 'chat/js/chat.min';\n\nvar update = React.addons.update;\nvar classSet = React.addons.classSet;\n\nvar getMessages = function (messages, other) {\n    return messages.filter(\n\tfunction (msg) {\n\t    return msg.from === other || msg.to === other;\n\t}\n    );\n};\n\n// util functions\nfunction notifyNewMessage (msg) {\n    document.getElementById('new-message-beep').play();\n    var notification = new Notification(\"New message from \" + msg.from, {\n\ticon : \"/static/images/ditto-logo.png\",\n\tbody: msg.message.slice(0, 140)\n    });\n    // TODO this is supposed to go to the right tab in chrome but doesn't seem to work\n    notification.onclick = function () {\n\twindow.focus();\n    };\n}\n// ------\n\nChat.connect(\n    chatConf.server,\n    chatConf.me,\n    chatConf.password,\n    chatConf.chatroom, // TODO this will need to be multiple rooms\n    chatConf.nick\n);\n\n\n// TODO not sure if this is state of the ChatApp or not\nvar notified = [];\n\nvar ChatApp = React.createClass({\n    getInitialState: function () {\n\treturn {\n\t    talkingTo: Strophe.getNodeFromJid(this.props.other || ''),\n\t    chat: Chat.getState(),\n\t    isHidden: Visibility.hidden(),\n\t}\n    },\n    componentDidMount: function() {\n\tChat.addChangeListener(this._onChange);\n\t// TODO need to get this working for chatting to someone for the first time\n\t//\tChat.addFriend(this.state.talkingTo);\n\tthis.listener = Visibility.change((e, state) => {\n\t    var messages = getMessages(this.state.chat.messages, this.state.talkingTo);\n\t    this.markMessagesRead(messages);\n\t    this.setState({isHidden: Visibility.hidden()});\n\t});\n    },\n    componentWillUnmount: function() {\n\tChat.removeChangeListener(this._onChange);\n\tVisibility.unbind(this.listener);\n    },\n    _onChange: function() {\n\tvar newState = Chat.getState();\n\tif (this.state.isHidden) {\n\t    this.setState({chat: newState});\n\t} else {\n\t    var messages = getMessages(newState.messages, this.state.talkingTo);\n\t    this.markMessagesRead(messages);\n\t    this.setState({chat: Chat.getState()});\n\t}\n    },\n    markMessagesRead: function (messages) {\n\tvar unread = messages\n\t    .filter(m => { return !m.isRead; })\n\t    .map(m => { return m.id; });\n\tif (unread.length) {\n\t    Chat.markMessagesRead(unread)\n\t};\n    },\n    switchChat: function (friend) {\n\tvar messages = getMessages(this.state.chat.messages, friend);\n\tthis.markMessagesRead(messages);\n\tthis.setState({\n\t    talkingTo: friend,\n\t});\n    },\n    handleMessageSubmit: function (message) {\n\tif (this.props.page === 'chatroom') {\n\t    Chat.sendGroupMessage(message);\n\t} else {\n\t    Chat.sendPrivateMessage(this.state.talkingTo, message);\n\t}\n    },\n    handleMessageChange: function () {\n\tChat.sendIsTyping();\n    },\n    render: function () {\n\tvar messages;\n\n\t// TODO does this belong in another component really, or not in a component at all (as a beep and desktop notification are not really part of the UI)?\n\tif (this.state.isHidden || this.props.page !== 'messages') {\n\t    this.state.chat.messages.forEach(message => {\n\t\tif (message.from !== Strophe.getNodeFromJid(chatConf.me) &&\n\t\t    !message.isRead &&\n\t\t    notified.indexOf(message.id) === -1\n\t\t) {\n\t\t    notifyNewMessage(message);\n\t\t    notified.push(message.id);\n\t\t}\n\t    });\n\t};\n\t\t\n\tif (this.state.chat.connectionStatus !== 'connected') {\n\t    return (\n\t\t<div>\n\t\t    {this.state.chat.connectionStatus}\n\t\t</div>\n\t    );\n\t} else if (this.props.page === 'chatroom') {\n\t    return (\n\t\t<div className=\"row\">\n    \t\t    <div className=\"col-md-8\">\n    \t\t\t<Messages me={Strophe.getNodeFromJid(this.props.me)} talkingTo={this.state.talkingTo} messages={this.state.chat.chatroomMessages} userMeta={this.state.chat.userMeta} />\n\t\t\t<div className=\"row msgbar\">\n      \t\t\t    <ComposeMessage onMessageSubmit={this.handleMessageSubmit} onMessageChange={this.handleMessageChange} />\n\t\t\t</div>\n    \t\t    </div>\n\t\t    <div className=\"col-md-4\">\n\t\t\t<ChatroomPresence users={this.state.chat.chatroomPresence}/>\n\t\t    </div>\n\t\t</div>\n\t    );\n\t} else if (this.props.page === 'messages') {\n\t    messages = getMessages(this.state.chat.messages, this.state.talkingTo);\n\t    return (\n    \t\t<div className=\"row\">\n    \t\t    <div className=\"col-md-4\">\n\t\t\t<div className=\"list-group\">\n    \t\t\t    <Friends messages={this.state.chat.messages} friends={this.state.chat.friends} friendStatus={this.state.chat.friendStatus} current={this.state.talkingTo} switchChat={this.switchChat} userMeta={this.state.chat.userMeta} />\n\t\t\t</div>\n    \t\t    </div>\n    \t\t    <div className=\"col-md-8\">\n    \t\t\t<Messages me={Strophe.getNodeFromJid(this.props.me)} talkingTo={this.state.talkingTo} messages={messages} userMeta={this.state.chat.userMeta} />\n    \t\t\t<WhosTyping users={this.state.chat.whosTyping} />\n\t\t\t<div className=\"row msgbar\">\n    \t\t\t    <ComposeMessage onMessageSubmit={this.handleMessageSubmit} onMessageChange={this.handleMessageChange} />\n\t\t\t    <MyStatus setStatus={Chat.setStatus} />\n\t\t\t</div>\n    \t\t    </div>\n    \t\t</div>\n\t    );\n\t} else {\n\t    // For now we have some pages with no chat UI elements but\n\t    // we're still connected to chat so we can, for example, beep\n\t    // on new messages.\n\t    return false;\n\t}\n    }\n});\n\nvar WhosOnline = React.createClass({\n    usersPerPanel: 9, // TODO could be props\n    getInitialState: function () {\n\treturn Chat.whosOnline();\n    },\n    componentDidMount: function() {\n\tChat.addChangeListener(this._onChange);\n    },\n    componentWillUnmount: function() {\n\tChat.removeChangeListener(this._onChange);\n    },\n    _onChange: function() {\n\tthis.setState(Chat.whosOnline());\n    },\n    groupUsers: function (users) {\n\tvar grouped = [];\n\tvar group;\n\tusers.forEach((user, i) => {\n\t    if (i % this.usersPerPanel === 0) {\n\t\tgroup = [];\n\t\tgrouped.push(group);\n\t    }\n\t    group.push(user);\n\t});\n\treturn grouped;\n    },\n    render: function () {\n\tvar groupedUsers = this.groupUsers(this.state.online);\n\tvar items = groupedUsers.map((group, i) => {\n\t    return (\n\t\t<Bootstrap.CarouselItem key={i}>\n\t\t    <WhosOnlineItem users={group} key={i} />\n\t\t</Bootstrap.CarouselItem>\n\t    );\n\t});\n\treturn (\n\t    <div className=\"row\">\n\t\t<div className=\"col-md-4 whosonline\">\n\t\t    <Bootstrap.Carousel interval={false}>\n\t\t\t{items}\n\t\t    </Bootstrap.Carousel>\n\t\t</div>\n\t    </div>\n\t);\n    }\n});\n\nvar WhosOnlineItem = React.createClass({\n    render: function () {\n\tvar users = this.props.users.map((user, i) => {\n\t    return (\n\t\t<div className=\"avatar\" key={i}>\n\t\t    <Avatar size={100} user={user} />\n\t\t    <p>{user} (<Role user={user} />)</p>\n\t\t</div>\n\t    );\n\t});\n\treturn (\n\t    <div>\n\t\t{users}\n\t    </div>\n\t);\n    }\n});\n\nvar ChatroomPresence = React.createClass({\n    render: function () {\n\tvar memberNodes = this.props.users.map(function (user) {\n\t    return (\n\t\t<li className=\"list-group-item\" key={user}>\n                    <div className=\"media\">\n\t\t\t<div className=\"media-left media-middle\">\n\t\t\t</div>\n\t\t\t<div className=\"media-body\">\n                            <h4 className=\"media-heading\">{user}</h4>\n\t\t\t</div>\n\t\t    </div>\n\t\t</li>\n\t    );\n\t});\n\treturn (\n            <ul className=\"list-group\">\n\t\t{memberNodes}\n            </ul>\n\t);\n    }\n});\n    \nvar MyStatus = React.createClass({\n    getInitialState: function() {\n\treturn {\n\t    status: '',\n\t    message: '',\n\t};\n    },\n    handleMessageChange: function(event) {\n\tthis.setState({message: event.target.value});\n    },\n    handleStatusChange: function (e) {\n\te.preventDefault();\n\tvar message = this.refs.message.getDOMNode().value.trim();\n\tvar code = this.refs.status.getDOMNode().value;\n\tthis.props.setStatus(code, message);\n    },\n    render: function () {\n\tvar options = [];\n\tfor (var code in Chat.chatStatus) {\n\t    options.push(<option value={code} key={code}>{Chat.chatStatus[code]}</option>);\n\t}\n\treturn (\n\t    <form onSubmit={this.handleStatusChange}>\n\t\t<div className=\"col-md-2\">\n\t\t    <input className=\"form-control\" value={this.state.message} onChange={this.handleMessageChange} type=\"text\" placeholder=\"Type your custom status message here...\" ref=\"message\" />\n\t\t</div>\n\t\t<div className=\"col-md-2\">\n\t\t    <select className=\"form-control\" ref=\"status\">\n\t\t\t<option value=\"\">Online</option>\n\t\t\t{options}\n\t\t    </select>\n\t\t</div>\n\t\t<div className=\"col-md-1\">\n\t\t    <input className=\"form-control btn btn-success\" type=\"submit\" value=\"Set status\" />\n\t\t</div>\n\t    </form>\n\t);\n    }\n});\n\nvar Friends = React.createClass({\n    render: function () {\n\tvar self = this;\n\tvar friendNodes = this.props.friends.map(function(friend, index) {\n\t    var isCurrent = self.props.current === friend;\n\t    var status = self.props.friendStatus[friend];\n\t    var lastMessage = getMessages(self.props.messages, friend).pop();\n\t    return (\n\t\t<Friend isCurrent={isCurrent} friend={friend} status={status} lastMessage={lastMessage} key={index} switchChat={self.props.switchChat} userMeta={self.props.userMeta} />\n\t    );\n\t});\n\treturn (\n\t    <div>\n\t\t{friendNodes}\n\t    </div>\n\t);\n    }\n});\n\nvar Friend = React.createClass({\n    switchChat: function (e) {\n\te.preventDefault();\n\tthis.props.switchChat(this.props.friend);\n    },\n    render: function () {\n\tvar current, status = '', lastMessage;\n\tif (this.props.isCurrent) {\n\t    current = (\n\t\t<span> * </span>\n\t    );\n\t}\n\tif (this.props.status && this.props.status.hasOwnProperty('code')) {\n\t    status = <FriendStatus code={this.props.status.code} message={this.props.status.message} />;\n\t} else {\n\t    status = <p>Offline</p>;\n\t}\n\treturn (\n\t    <a className=\"list-group-item\" href=\"#\" onClick={this.switchChat}>\n\t\t<div className=\"media-left media-middle friends-avatar\">\n\t\t    <Avatar size={50} user={this.props.friend} />\n\t\t</div>\n\t\t<div className=\"media-body\">\n\t\t    <h4 className=\"media-heading friends-username\">{current} {this.props.friend}</h4>\n\t\t    {status}\n\t\t    <LastMessage message={this.props.lastMessage} />\n\t\t</div>\n\t    </a>\n\t);\n    }\n});\n\nvar LastMessage = React.createClass({\n    render: function () {\n\tif (this.props.message) {\n\t    return <div>\n\t\t{this.props.message.message} <small><Timestamp when={this.props.message.when} /></small>\n\t    </div>;\n\t} else {\n\t    return <div></div>;  // TODO empty component a thing?\n\t}\n    }\n});\n\nvar FriendStatus = React.createClass({\n    render: function () {\n\tvar status = Chat.chatStatus[this.props.code] || 'Online';\n\treturn (\n\t    <p>{status} <em>{this.props.message}</em></p>\n\t);\n    }\n});\n\nvar Messages = React.createClass({\n    getInitialState: function () {\n\treturn {height: ''};\n    },\n    componentDidMount: function () {\n\t// TODO window.onresize cross-browser?\n\t$(window).on('resize', this.updateHeight);\n    },\n    updateHeight: function () {\n\t// TODO no pure css way to do this?\n\t// Note, tried to calculate the height from other dom elements but it's easier just to hardcode this vaule and change it when the css changes\n\tvar height = $(window).height() - 190;\n\tthis.setState({height: height});\n    },\n    componentWillMount: function () {\n\tthis.updateHeight();\n    },\n    componentWillUnmount: function () {\n\t$(window).off('resize', this.updateHeight);\n    },\n    componentDidUpdate: function() {\n\tvar node = this.getDOMNode();\n\tnode.scrollTop = node.scrollHeight;\n    },\n    render: function () {\n\tvar userMeta = this.props.userMeta;\n\tvar style;\n\tvar self = this;\n\tvar messageNodes = this.props.messages.map(function(m, i) {\n\t    // TODO this key should be unique across all messages, how do I do that?\n\t    return (\n\t\t<Message me={self.props.me} from={m.from} to={m.to} message={m.message} when={m.when} userMeta={userMeta} key={i} />\n\t    );\n\t});\n\tif (this.props.fixedHeight) {\n\t    // TODO fix this to only compute height if this is a full height chat message container\n\t    style = {};\n\t} else {\n\t    style = {height: this.state.height};\n\t}\n\treturn (\n\t    <div style={style} id=\"msgs\" ref=\"messages\">\n\t\t{messageNodes}\n\t    </div>\n\t);\n    }\n});\n\nvar Message = React.createClass({\n    render: function () {\n\tvar left_avatar, right_avatar;\n\tvar is_from_me = this.props.from === this.props.me;\n\tvar mediaClass = classSet({\n\t    'media-left': !is_from_me,\n\t    'media-right': is_from_me\n\t});\n\tvar avatar = <div className={mediaClass}>\n    \t\t<Avatar size={50} user={this.props.from} />\n\t</div>;\n\tvar colClass = classSet({\n\t    'col-md-6': true,\n\t    'col-md-offset-6': is_from_me\n\t});\n\tif (is_from_me) {\n\t    right_avatar = avatar;\n\t} else {\n\t    left_avatar = avatar;\n\t}\n\treturn (\n\t    <div className=\"row\">\n\t\t<div className={colClass}>\n\t\t    <div className=\"media\">\n\t\t\t{left_avatar}\n\t\t\t<div className=\"media-body\">\n\t\t\t    <h4 className=\"media-heading\">{this.props.from} (<Role user={this.props.from} />) <small><Timestamp when={this.props.when}/></small></h4>\n\t\t\t    {this.props.message}\n\t\t\t</div>\n\t\t\t{right_avatar}\n\t\t    </div>\n\t\t</div>\n\t    </div>\n\t);\n    }\n});\n\nvar WhosTyping = React.createClass({\n    render: function () {\n\tvar nodes = this.props.users.map((user, i) =>\n\t    <p key={i}>{user} is typing ...</p>\n\t);\n\treturn (\n\t    <div>{nodes}</div>\n\t);\n    }\n});\n\nvar Avatar = React.createClass({\n    getInitialState: function () {\n\treturn Chat.getUserProfiles();\n    },\n    componentDidMount: function() {\n\tChat.addChangeListener(this._onChange);\n    },\n    componentWillUnmount: function() {\n\tChat.removeChangeListener(this._onChange);\n    },\n    _onChange: function() {\n\tthis.setState(Chat.getUserProfiles());\n    },\n    render: function () {\n\t// TODO where to put global constant state like this?\n\tvar avatarSVGs = $('#avatar_svgs').text();\n\tvar avatarName;\n\tvar profile = this.state.profiles[this.props.user];\n\tif (profile) {\n\t    avatarName = profile.avatar;\n\t} else {\n\t    avatarName = 'cupcake'\n\t}\n\t// TODO better way to generate svg without jquery/outerHTML, convert svg to react component?\n\tvar avatarSVG = $(avatarSVGs);\n\tif (avatarName) {\n\t    avatarSVG.find('>g[id!=' + avatarName + ']').remove();\n\t    avatarSVG.find('>g').show();\n\t    avatarSVG.attr({\n\t\twidth: this.props.size,\n\t\theight: this.props.size\n\t    });\n\t    avatarSVG = avatarSVG.get(0).outerHTML;\n\t} else {\n\t    avatarSVG = '';\n\t}\n\treturn (\n\t    <div className=\"avatar\">\n\t\t<div dangerouslySetInnerHTML={{__html: avatarSVG}} />\n\t    </div>\n\t);\n    }\n});\n\nvar ChangeAvatar = React.createClass({\n    getAvatars: function () {\n\t// TODO tidy up avatar/svg handling\n\tvar avatarSVGs = $($('#avatar_svgs').text());\n\tvar avatars = [];\n        avatarSVGs.find('g').show();\n        avatarSVGs.find('>g[id!=guides]').each(function () {\n            var svg_clone = avatarSVGs.clone();\n            svg_clone.find('>g').remove();\n            svg_clone.append($(this));\n\t    avatars.push([$(this).attr('id'), svg_clone.get(0).outerHTML]);\n        });\n\treturn avatars;\n    },\n    render: function () {\n\tvar avatars = this.getAvatars().map(avatar => {\n\t    var avatarName = avatar[0];\n\t    var changeAvatar = function () {\n\t\tChat.setAvatar(avatarName);\n\t    }\n\t    return (\n\t\t<li key={avatarName}><a onClick={changeAvatar} dangerouslySetInnerHTML={{__html: avatar[1] }} href=\"#\"></a></li>\n\t    );\n\t});\n\treturn (\n\t    <div className=\"btn-group\">\n                <button type=\"button\" className=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">\n                    Change avatar <span className=\"caret\"></span>\n                </button>\n                <ul className=\"dropdown-menu\" role=\"menu\">\n\t\t    {avatars}\n                </ul>\n            </div>\n\t);\n    }\n});\n\nvar Timestamp = React.createClass({\n    componentDidMount: function() {\n\tthis.interval = setInterval(this.updateDelta, 60 * 1000);\n    },\n    componentWillUnmount: function () {\n\tclearInterval(this.interval);\n    },\n    updateDelta: function () {\n\t// TODO this doesn't feel right\n\tthis.setState({});\n    },\n    // TODO prob library for this\n    timeAgo: function (date) {\n\tvar delta = new Date() - date;\n\tif (delta < 60000) {\n\t    return 'less than a minute ago';\n\t}\n\tif (delta < 3600 * 1000) {\n\t    var minutes = delta / (60 * 1000);\n\t    return Math.floor(minutes) + ' minutes ago';\n\t}\n\tif (delta < 2 * 3600 * 1000) {\n\t    return 'about an hour ago';\n\t}\n\treturn 'ages ago';\n    },\n    render: function () {\n\tvar when = this.props.when;\n\tvar delta = this.timeAgo(when);\n\treturn (\n\t    <time dateTime={when.toISOString()}>{delta}</time>\n\t);\n    }\n});\n\nvar ComposeMessage = React.createClass({\n    getInitialState: function() {\n\treturn {value: ''};\n    },\n    handleChange: function(event) {\n\tthis.setState({value: event.target.value});\n\tthis.props.onMessageChange();\n    },\n    handleSubmit: function(e) {\n\te.preventDefault();\n\tvar message = this.refs.message.getDOMNode().value.trim();\n\tif (!message) {\n\t    return;\n\t}\n\tthis.props.onMessageSubmit(message);\n\tthis.setState({value: ''});\n\treturn;\n    },\n    render: function() {\n\treturn (\n\t    <form onSubmit={this.handleSubmit}>\n\t\t<div className=\"col-md-6\">\n\t\t    <input className=\"form-control\" value={this.state.value} onChange={this.handleChange} type=\"text\" placeholder=\"Type your message here...\" ref=\"message\" />\n\t\t</div>\n\t\t<div className=\"col-md-1\">\n\t\t    <input className=\"btn btn-success\" type=\"submit\" value=\"Say it!\" />\n\t\t</div>\n\t    </form>\n\t);\n    }\n});\n\nvar ChatroomModule = React.createClass({\n    getInitialState: function () {\n\treturn Chat.getState();\n    },\n    componentDidMount: function() {\n\tChat.addChangeListener(this._onChange);\n    },\n    componentWillUnmount: function() {\n\tChat.removeChangeListener(this._onChange);\n    },\n    _onChange: function() {\n\tthis.setState(Chat.getState());\n    },\n    render: function () {\n\tvar messages = this.state.chatroomMessages.slice(-5);\n\treturn (\n\t    <Messages fixedHeight={true} messages={messages} />\n\t);\n    }\n});\n\n\nvar Role = React.createClass({\n    getInitialState: function () {\n\treturn Chat.getUserProfiles();\n    },\n    componentDidMount: function() {\n\tChat.addChangeListener(this._onChange);\n    },\n    componentWillUnmount: function() {\n\tChat.removeChangeListener(this._onChange);\n    },\n    _onChange: function() {\n\tthis.setState(Chat.getUserProfiles());\n    },\n    render: function () {\n\tvar meta = this.state.profiles[this.props.user];\n\tvar role = meta ? meta.role : '-';\n\treturn <span>{role}</span>;\n    }\n});\n\nvar NewMessageCount = React.createClass({\n    getInitialState: function () {\n\treturn Chat.getState();\n    },\n    componentDidMount: function() {\n\tChat.addChangeListener(this._onChange);\n    },\n    componentWillUnmount: function() {\n\tChat.removeChangeListener(this._onChange);\n    },\n    _onChange: function() {\n\tthis.setState(Chat.getState());\n    },\n    render: function () {\n\tvar unread = this.state.messages.filter(m => {\n\t    return !m.isRead;\n\t}).length;\n\tif (unread) {\n\t    return <b>{unread}</b>;\n\t} else {\n\t    return false;\n\t}\n    }\n});\n\nvar render = function () {\n    var whosonline = document.getElementById('whosonline');\n    var chat = document.getElementById('chat');\n    var chatroomModule = document.getElementById('chat-module');\n    var profileAvatar = document.getElementById('profile-avatar');\n    \n    React.render(\n\t<ChatApp me={chatConf.me} other={chatConf.other} page={chatConf.page} />, chat || document.getElementById('emptychat')\n    );\n    React.render(\n\t<NewMessageCount />, document.getElementById('new-message-count')\n    );\n    if (whosonline) {\n\tReact.render(<WhosOnline />, whosonline);\n    };\n    if (chatroomModule) {\n\tReact.render(\n\t    <ChatroomModule />, chatroomModule\n\t);\n    }\n    if (profileAvatar) {\n\tvar name = profileAvatar.dataset['name'];\n\tReact.render(\n\t    <Avatar user={name} size={100} />, profileAvatar\n\t);\n\tReact.render(\n\t    <ChangeAvatar user={name} />, document.getElementById('change-avatar')\n\t);\n    }\n    React.render(\n\t<Avatar user={Strophe.getNodeFromJid(chatConf.me)} size={50} />, document.getElementById('nav-avatar')\n    );\n}\n\nexport default render;\n"]}